{"version":3,"sources":["webpack:///C:/Users/Administrator/Downloads/yinshishixi/ss-vip-customer-Cilent/pages/getCards/getCards.vue?411b","webpack:///C:/Users/Administrator/Downloads/yinshishixi/ss-vip-customer-Cilent/pages/getCards/getCards.vue?f94d","webpack:///C:/Users/Administrator/Downloads/yinshishixi/ss-vip-customer-Cilent/main.js","webpack:///C:/Users/Administrator/Downloads/yinshishixi/ss-vip-customer-Cilent/pages/getCards/getCards.vue?5f87","webpack:///C:/Users/Administrator/Downloads/yinshishixi/ss-vip-customer-Cilent/pages/getCards/getCards.vue?0ee0","webpack:///C:/Users/Administrator/Downloads/yinshishixi/ss-vip-customer-Cilent/pages/getCards/getCards.vue?8929","webpack:///C:/Users/Administrator/Downloads/yinshishixi/ss-vip-customer-Cilent/pages/getCards/getCards.vue?c3a3","webpack:///C:/Users/Administrator/Downloads/yinshishixi/ss-vip-customer-Cilent/pages/getCards/getCards.vue"],"names":["createPage","Page","onShow","options","color","BASECOLOR","ossDownloadUrl","HTTPCONFIG","COMMONFUNCTION","getStorageByKey","STORAGECONFIG","appData","then","data","cardId","cardType","saleAmt","queryVipCardInfo","from","params","split","realScene","aes","Decrypt","console","log","queryByRealScence","removeStorageByKey","catch","e","uni","showToast","icon","title","q","JSON","stringify","decodeURIComponent","substring","length","openId","grpId","shopId","cardInfo","hasRegist","hasGet","disabled","cardConfig","status","used","onPullDownRefresh","methods","scenceArray","toDetail","path","toPage","getCard","getCode","code","res","pay","getRandomMerchantTxnNumber","custInfoList","openid","redirectPage","showError","mpGetUserInfo","detail","userInfo","toSetting","nickName","avatarUrl","grpCode","login","stopPullDownRefresh","rc","cantGetCard","unRegist","Object","$refs","notify","show","rcDetail","COLORCONFIG","danger","String","userAgreement","privAgreement","merCode","merchantTxnNo","txnAmt","payerRealID","requestPayment","provider","timeStamp","ExtendInfo","nonceStr","package","signType","paySign","success","fail","err"],"mappings":"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","file":"pages/getCards/getCards.js","sourcesContent":["import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./getCards.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./getCards.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1589785569166\n      var cssReload = require(\"C:/Users/Administrator/Downloads/yinshishixi/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/getCards/getCards.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./getCards.vue?vue&type=template&id=d284ac0c&\"\nvar renderjs\nimport script from \"./getCards.vue?vue&type=script&lang=js&\"\nexport * from \"./getCards.vue?vue&type=script&lang=js&\"\nimport style0 from \"./getCards.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"ss-vip-customer-Cilent/pages/getCards/getCards.vue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./getCards.vue?vue&type=template&id=d284ac0c&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./getCards.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./getCards.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\timport {login,isReceive,regist,vipQueryCardType,receive,buyCard} from '@/common/api.js'\n\timport cardConfig from '@/common/card-config.js'\n\timport aes from '@/utils/aes.js'\n\t\n\t\n\texport default {\n\t\tonShow(options) {\n\t\t\tthis.color=this.BASECOLOR;\n\t\t\tthis.ossDownloadUrl = this.HTTPCONFIG.ossDownloadUrl;\n\n\n\t\t\t//买卡用的\n\t\t\tthis.COMMONFUNCTION.getStorageByKey(this.STORAGECONFIG.appData).then((data)=>\n\t\t\t{\n\t\t\t\tthis.cardId=data.cardType\n\t\t\t\tthis.saleAmt = data.saleAmt\n\t\t\t\tthis.queryVipCardInfo();\n\t\t\t\t//先后授权注册商户，后付款领卡\n\t\t\t\t/*\t\t\t\tvipQueryCardType(data.cardType).then((res)=>{\n                                            console.log(res.cardType.saleAmt);\n                                            if(res.saleAmt>0){\n                                                uni.requestPayment({\n                                                    provider: 'wxpay',\n                                                    timeStamp: String(Date.now()),\n                                                    nonceStr: 'A1B2C3D4E5',\n                                                    package: 'prepay_id=wx20180101abcdefg',\n                                                    signType: 'MD5',\n                                                    paySign: '',\n                                                    success: function (res) {\n                                                        console.log('success:' + JSON.stringify(res));\n                                                    },\n                                                    fail: function (err) {\n                                                        console.log('fail:' + JSON.stringify(err));\n                                                    }\n                                                });\n                                            }\n                                        }\n                                )*/\n\t\t\t})\n\n\n\t\t\tif(options.from==1){\n\t\t\t\tthis.COMMONFUNCTION.getStorageByKey('qrCodeUrl').then(data=>{\n\t\t\t\t\tvar params=data.split('?')[1];\n\t\t\t\t\tvar realScene;\n\t\t\t\t\tif(params){\n\t\t\t\t\t\trealScene=aes.Decrypt(params)\n\t\t\t\t\t\tconsole.log(realScene)\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\tthis.queryByRealScence(realScene);\n\t\t\t\t\tthis.COMMONFUNCTION.removeStorageByKey('qrCodeUrl')\n\t\t\t\t}).catch(e=>{\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\ttitle:'获取会员卡信息错误',\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tvar q=JSON.stringify(decodeURIComponent(options.q));\n\t\t\tq= q.substring(1,q.length-1);\t\t\n\t\t\tvar params=q.split('?')[1];\n\t\t\tvar realScene;\n\t\t\tif(params){\n\t\t\t\trealScene=aes.Decrypt(params)\n\t\t\t\tconsole.log(realScene)\t\t\t\n\t\t\t}\n\t\t\tif(!realScene){\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon:'none',\n\t\t\t\t\ttitle:'获取会员卡信息错误',\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\tthis.queryByRealScence(realScene);\n\t\t\t\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\topenId: '',\n\t\t\t\tcardType: '',//健身房买卡用的（没有码）\n\t\t\t\tsaleAmt: 0.00,\n\t\t\t\tcolor:'',\n\t\t\t\tcardId:'',//扫码领卡用的（有码需要解析）\n\t\t\t\tgrpId:'',\n\t\t\t\tshopId:'',\n\t\t\t\tcardInfo:'',\n\t\t\t\thasRegist:false,\n\t\t\t\thasGet:false,//是否领取过\n\t\t\t\tossDownloadUrl:'',\n\t\t\t\tdisabled:cardConfig.status.disabled,\n\t\t\t\tused:cardConfig.status.used,\n\t\t\t}\n\t\t},\n\t\t\n\t\tonPullDownRefresh() {\n\t\t\t\tthis.queryVipCardInfo();\t\t\n\t\t},\n\n\t\tmethods: {\n\t\t\tqueryByRealScence(realScene){\n\t\t\t\tvar scenceArray=realScene.split('-');\n\t\t\t\tvar cardId=scenceArray[0]\n\t\t\t\tif(scenceArray.length>=2){\n\t\t\t\t\tvar shopId=scenceArray[1];\n\t\t\t\t}\t\t\t\n\t\t\t\tif(cardId){\n\t\t\t\t\tthis.cardId=cardId\n\t\t\t\t\tif(shopId){\n\t\t\t\t\t\tthis.shopId=shopId;\n\t\t\t\t\t}\n\t\t\t\t\t//查询会员卡\n\t\t\t\t\tthis.queryVipCardInfo();\n\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\ttitle:'获取会员卡信息错误',\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\ttoDetail(path){\n\t\t\t\tthis.COMMONFUNCTION.toPage(path);\n\t\t\t},\n\t\t\t//领卡\n\t\t\tgetCard(){\n\t\t\t\tif(this.saleAmt>0){\n\t\t\t\t\t//调支付\n\t\t\t\t\tconsole.log('ok');\n\t\t\t\t\tthis.COMMONFUNCTION.getCode().then(code=>{\n\t\t\t\t\t\tlogin(code,this.grpId).then(res=>{\n\t\t\t\t\t\t\tthis.pay(this.grpId,this.COMMONFUNCTION.getRandomMerchantTxnNumber(),this.saleAmt,res.custInfoList[0].openid);\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t}else{\n\t\t\t\t\treceive(this.cardId,this.grpId,this.shopId).then(res=>{\n\t\t\t\t\t\tthis.COMMONFUNCTION.redirectPage(\"/pages/mycards-and-coupon/mycards-and-coupon\")\n\t\t\t\t\t}).catch(res=>{\n\t\t\t\t\t\tthis.showError(res)\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t},\n\t\t\tmpGetUserInfo(res){\n\t\t\t\tif(this.hasRegist){\n\t\t\t\t\t\t//注册成功。直接领卡\n\t\t\t\t\t\tthis.getCard();\n/*\t\t\t\t\t//注册过了。直接领卡\n\t\t\t\t\tthis.getCard();*/\n\t\t\t\t}else{\n\t\t\t\t\tif(!res.detail.userInfo){\n\t\t\t\t\t\t//授权失败\n\t\t\t\t\t\tthis.COMMONFUNCTION.toSetting(\"授权失败,请开启授权\")\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tthis.COMMONFUNCTION.getCode().then(code=>{\n\t\t\t\t\t\tconsole.log('getCode')\n\t\t\t\t\t\t//注册\n\t\t\t\t\t\tlet userInfo=res.detail.userInfo;\n\t\t\t\t\t\t//注册来源2 领卡\n\t\t\t\t\t\tregist(code,userInfo.nickName,2,1,this.grpId,userInfo.avatarUrl,this.shopId).then(res=>{\n\t\t\t\t\t\t\tconsole.log('register')\n\t\t\t\t\t\t\t\t//注册成功。直接领卡\n\t\t\t\t\t\t\t\tthis.getCard();\n\t\t\t\t\t\t}).catch(res=>{\n\t\t\t\t\t\t\tthis.showError(res)\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\tqueryVipCardInfo(){\n\t\t\t\tvipQueryCardType(this.cardId).then(res=>{\n\t\t\t\t\tthis.cardInfo=res.cardType;\n\t\t\t\t\tthis.grpId=res.cardType.grpCode;\n\t\t\t\t\tthis.saleAmt = res.cardType.saleAmt;\n\t\t\t\t\tconsole.log(this.saleAmt,'this.saleAmt')\n\t\t\t\t\t//登录\n\t\t\t\t\tthis.login();\n\t\t\t\t}).catch(res=>{\n\t\t\t\t\tthis.showError(res)\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t},\n\t\t\tlogin(){\n\t\t\t\tthis.COMMONFUNCTION.getCode().then(code=>{\n\t\t\t\t\tlogin(code,this.grpId).then(res=>{\n\t\t\t\t\t\t// this.openId =res.custInfoList[0].openid;\n\t\t\t\t\t\tuni.stopPullDownRefresh();\n\t\t\t\t\t\t//已注册过(在这个商户下有记录，可能是优惠券，也可能是会员卡) 检查是否已领取过该商户的会员卡\n\t\t\t\t\t\tthis.hasRegist=true;\n\t\t\t\t\t\t//检查是否可领\n\t\t\t\t\t\tisReceive(this.grpId).then(()=>{\n\t\t\t\t\t\t\t//可以领取\n\t\t\t\t\t\t\tthis.hasGet=false;\n\t\t\t\t\t\t}).catch(data=>{\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(data.rc===this.HTTPCONFIG.cantGetCard){\n\t\t\t\t\t\t\t\t//不可领卡，领取过了\n\t\t\t\t\t\t\t\tthis.hasGet=true;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.showError(data)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}).catch((res)=>{\n\t\t\t\t\t\tuni.stopPullDownRefresh();\n\t\t\t\t\t\t//未注册过该商户 注册并领卡\n\t\t\t\t\t\tif(res.rc && res.rc===this.HTTPCONFIG.unRegist){\n\t\t\t\t\t\t\t//未注册\n\t\t\t\t\t\t\tthis.hasRegist=false;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.showError(res)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t\n\t\t\t},\n\t\t\tshowError(res){\n\t\t\t\tif( res instanceof(Object) ){\n\t\t\t\t\tthis.$refs.notify.show(res.rcDetail,this.COLORCONFIG.danger)\n\t\t\t\t}else if( res instanceof(String) ){\n\t\t\t\t\tthis.$refs.notify.show(res,this.COLORCONFIG.danger)\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tthis.$refs.notify.show('未知错误',this.COLORCONFIG.danger)\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t\t\tuserAgreement(){\n\t\t\t\tthis.COMMONFUNCTION.toPage('/pages/about-content/userAgreement')\n\t\t\t},\n\t\t\tprivAgreement(){\n\t\t\t\tthis.COMMONFUNCTION.toPage('/pages/about-content/privacyAgreement')\n\t\t\t\t\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * 支付\n\t\t\t */\n\t\t\tpay(merCode,merchantTxnNo,txnAmt,payerRealID){\n\t\t\t\tbuyCard(merCode, txnAmt, merchantTxnNo,payerRealID).then(e=>{\n\t\t\t\t\t//调微信支付\n\t\t\t\t\tuni.requestPayment({\n\t\t\t\t\t\tprovider: 'wxpay',\n\t\t\t\t\t\ttimeStamp: e.ExtendInfo.timeStamp,\n\t\t\t\t\t\tnonceStr: e.ExtendInfo.nonceStr,\n\t\t\t\t\t\tpackage: e.ExtendInfo.package,\n\t\t\t\t\t\tsignType: e.ExtendInfo.signType,\n\t\t\t\t\t\tpaySign: e.ExtendInfo.paySign,\n\t\t\t\t\t\tsuccess: res =>  {\n\t\t\t\t\t\t\tconsole.log('success:' + JSON.stringify(res));\n\t\t\t\t\t\t\treceive(this.cardId,this.grpId,this.shopId).then(res=>{\n\t\t\t\t\t\t\t\tthis.COMMONFUNCTION.redirectPage(\"/pages/mycards-and-coupon/mycards-and-coupon\")\n\t\t\t\t\t\t\t}).catch(res=>{\n\t\t\t\t\t\t\t\tthis.showError(res)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: err=> {\n\t\t\t\t\t\t\tconsole.log('fail:' + JSON.stringify(err));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}).catch(e=>{\n\t\t\t\t\t// if(isDiscount){\n\t\t\t\t\t// \t//如果是核销过了，但是支付失败，需要撤回\n\t\t\t\t\t// \treturnDheckDiscount(merchatTxnNo,merCode).then(res=>{\n\t\t\t\t\t// \t\tthis.$refs.notify.show('支付失败'+e, this.COLORCONFIG.danger);\n\n\t\t\t\t\t// \t}).catch(e=>{\n\t\t\t\t\t// \t\tthis.$refs.notify.show('支付失败!优惠核销撤销失败!'+e, this.COLORCONFIG.danger);\n\t\t\t\t\t// \t})\n\t\t\t\t\t// }else{\n\t\t\t\t\t// \tthis.$refs.notify.show('支付失败'+e, this.COLORCONFIG.danger);\n\n\t\t\t\t\t// }\n\t\t\t\t\tthis.$refs.notify.show('支付失败'+e, this.COLORCONFIG.danger);\n\t\t\t\t})\n\t\t\t},\n\t\t}\n\t}\n"],"sourceRoot":""}