(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mycoupon/mycoupon"],{7592:function(o,n,t){"use strict";t.r(n);var e=t("7b80"),a=t.n(e);for(var c in e)"default"!==c&&function(o){t.d(n,o,(function(){return e[o]}))}(c);n["default"]=a.a},"7b2c":function(o,n,t){"use strict";(function(o){t("e525"),t("921b");e(t("66fd"));var n=e(t("7c1f"));function e(o){return o&&o.__esModule?o:{default:o}}o(n.default)}).call(this,t("543d")["createPage"])},"7b80":function(o,n,t){"use strict";(function(o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=c(t("80cf")),a=t("064b");function c(o){return o&&o.__esModule?o:{default:o}}var u=60,r={onLoad:function(n){this.couponCode=n.couponCode,this.couponId=n.couponId,o.setNavigationBarColor({backgroundColor:"#FFFFFF",frontColor:"#ffffff"}),this.ossDownloadUrl=this.HTTPCONFIG.ossDownloadUrl},onShow:function(){this.query()},filters:{to4Dfs:function(o){return o&&(o=o.replace(/(.{4})/g,"$1 ")),o}},data:function(){return{ossDownloadUrl:"",color:"",height:250,width:250,coupon:{},couponId:"",couponCode:"",expTime:"",payToken:""}},onUnload:function(){clearInterval(this.Timer)},methods:{createQrCode:function(o,n,t,a){e.default.api.draw(o,n,t,a)},toDetail:function(){var o=this;this.COMMONFUNCTION.saveStorage("selectedCoupon",this.coupon).then((function(){o.COMMONFUNCTION.toPage("/pages/mycoupon/details")}))},query:function(){var n=this;this.coupon.couponInfo?this.generateToken():(0,a.queryCouponCanUsed)(1,1,"",this.couponId,this.couponCode,"",!0).then((function(t){n.coupon=t.data[0],o.setNavigationBarColor({backgroundColor:n.coupon.couponInfo.couponColor,frontColor:"#ffffff"}),n.generateToken()})).catch((function(o){n.$refs.notify.show(o,n.COLORCONFIG.danger)}))},Timer:function(){},generateToken:function(){var o=this;clearInterval(this.Timer),(0,a.generateCouponToken)(this.coupon.couponId,this.coupon.couponInfo.grpCode,u+30,1).then((function(n){o.createQrCode(n.data.payToken,"mycanvas",o.height,o.width),o.payToken=n.data.payToken,o.expTime=u;var t=u;o.Timer=setInterval((function(){t<=0?o.generateToken():(t--,o.expTime=t)}),1e3)})).catch((function(n){o.$refs.notify.show(n,o.COLORCONFIG.danger)}))}}};n.default=r}).call(this,t("543d")["default"])},"7c1f":function(o,n,t){"use strict";t.r(n);var e=t("adca"),a=t("7592");for(var c in a)"default"!==c&&function(o){t.d(n,o,(function(){return a[o]}))}(c);t("bcc9");var u,r=t("f0c5"),i=Object(r["a"])(a["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],u);n["default"]=i.exports},adca:function(o,n,t){"use strict";var e,a=function(){var o=this,n=o.$createElement,t=(o._self._c,o._f("to4Dfs")(o.payToken));o.$mp.data=Object.assign({},{$root:{f0:t}})},c=[];t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return c})),t.d(n,"a",(function(){return e}))},bbad:function(o,n,t){},bcc9:function(o,n,t){"use strict";var e=t("bbad"),a=t.n(e);a.a}},[["7b2c","common/runtime","common/vendor"]]]);